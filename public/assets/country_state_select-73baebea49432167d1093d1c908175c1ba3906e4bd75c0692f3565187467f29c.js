function CountryStateSelect(e){function t(){l(),r(),o(),$("#"+y).change(function(){return d($(this).val())})}function n(){$("#"+v).change(function(){return f($("#"+v).val(),$("#"+y).val())})}function r(){p()&&a()&&$("#"+v).chosen(e.chosen_options)}function o(){p()&&s()&&$("#"+b).chosen(e.chosen_options)}function a(){return!$("#"+v).is("[type=text]")}function s(){return!$("#"+b).is("[type=text]")}function l(){p()&&$("#"+y).chosen(e.chosen_options)}function u(){p()&&($("#"+e.state_id+"_chosen").remove(),$("#"+e.city_id+"_chosen").remove())}function c(){p()&&$("#"+e.city_id+"_chosen").remove()}function p(){return e.hasOwnProperty("chosen_ui")&&e.chosen_ui}function d(e){u(),f("",""),$.ajax({url:"/find_states",type:"post",dataType:"json",cache:!1,data:{country_id:e},success:function(e){h(e)}})}function f(e,t){c(),$.ajax({url:"/find_cities",type:"post",dataType:"json",cache:!1,data:{country_id:t,state_id:e},success:function(e){g(e)}})}function h(e){if(0===e.length)html='<input id="'+v+'" name="'+x+'" class="'+k+'" type="text"  type="text" value="" >';else{for(html='<select id="'+v+'" name="'+x+'" class="'+k+'" >',html+="<option>"+m("state")+"</option>",i=0;i<e.length;i++)html+="<option value="+e[i][0]+">"+e[i][1]+"</option>";html+="</select>"}$("#"+v).replaceWith(html),e.length>0&&r(),"undefined"!=typeof w&&n()}function m(t){return"city"===t?e.city_place_holder:e.state_place_holder}function g(e){if(0===e.length)html='<input id="'+b+'" name="'+w+'" class="'+T+'" type="text"  type="text" value="" >';else{for(html='<select id="'+b+'" name="'+w+'" class="'+T+'" >',html+="<option>"+m("city")+"</option>",i=0;i<e.length;i++)html+="<option>"+e[i]+"</option>";html+="</select>"}$("#"+b).replaceWith(html),e.length>0&&o()}var v=e.state_id,y=e.country_id,b=e.city_id,x=$("#"+v).attr("name"),k=$("#"+v).attr("class"),w=$("#"+b).attr("name"),T=$("#"+b).attr("class");return t()}